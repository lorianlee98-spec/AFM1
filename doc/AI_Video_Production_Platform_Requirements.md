# AI视频制片链路系统 - 需求文档

## 文档信息
- **文档版本**: 1.0
- **创建日期**: 2026-02-09
- **最后更新**: 2026-02-09
- **文档状态**: 进行中

## 1. 项目概述

### 1.1 核心价值主张
- **端到端自动化**: 完整覆盖从剧本创作到成片输出的全流程
- **智能链路整合**: 每个步骤根据内容属性动态调用AI API，自动传递结果
- **多目标优化平衡**: 在生成质量、处理效率、资源消耗、用户可控性之间取得平衡

### 1.2 目标用户群体
1. AI电影制作从业者
2. 广告和营销行业专业人士
3. 影视制作公司
4. 其他有商业视频制作需求的个人或组织

### 1.3 解决的问题
1. 设计并实现一个高度整合的AI视频制片链路系统，完整覆盖从剧本创作、分镜制作、基础音频生成、人设制作、分镜视频生成到可剪辑成片输出的全流程
2. 系统架构支持每个制作步骤根据不同的预期内容输入属性，动态调用相应的后端AI API进行模型处理，并将生成结果自动传递至下一流程节点，实现端到端的自动化内容生产
3. 进行多目标组合优化思考，明确系统设计中的核心目标（生成质量、处理效率、资源消耗、用户可控性等），并制定相应的优先级策略与技术实现路径

## 2. 系统工作流程

### 2.1 完整工作流程节点
1. **剧本创作** → 2. **分镜制作** → 3. **基础音频生成** → 4. **人设制作** → 5. **分镜视频生成** → 6. **可剪辑成片输出**

### 2.2 工作流程说明
- 各模块之间数据自动传递，实现端到端自动化
- 每个节点支持人工干预和修改
- 系统根据内容属性动态调用相应的AI API

## 3. 模块详细规范

### 3.1 剧本创作模块

#### 3.1.1 核心功能定位
- 以文字描述为主要内容载体
- 支持导入外部支持文档及基础剧本补充设定
- 实现剧本内容的结构化创作与管理

#### 3.1.2 输出规范
- **剧本输出**: 严格遵循行业标准剧本格式
- **分镜内容**: 本阶段仅以文字版分镜脚本形式呈现，详细视觉化分镜在后续"分镜制作"模块实现

#### 3.1.3 多语言支持
- 实现多语言剧本生成功能
- 提供直观的语言选择界面，支持至少包括中文、英文在内的主流语言切换
- 确保不同语言版本剧本内容的准确性与专业性

#### 3.1.4 分镜生成流程
- 系统自动生成分镜脚本初稿
- 生成完成后弹出明确的用户提示，询问是否需要进行人工修改
- 人工修改功能在界面中设置明显入口，确保用户在创作的任何阶段都能便捷访问

#### 3.1.5 视觉风格管理
- 平台内置至少5种行业主流的预设视觉风格模板
- 提供自定义风格定义功能，支持两种方式：
  - 自然语言描述输入
  - 风格图片上传与特征提取
- 所有风格设置需实时预览功能

#### 3.1.6 用户交互要求
- 所有人工介入修改的操作提供明确的保存、撤销、重做功能
- 关键操作节点设置确认机制，防止误操作导致内容丢失
- 提供自动保存功能，确保创作过程中的内容安全

#### 3.1.7 输出格式要求
- **标准剧本格式**: 符合行业规范，包含场景标题、动作描述、对话内容等要素
- **文字版分镜脚本**: 包含镜头编号、景别、拍摄手法、画面内容描述等核心要素
- **导出格式**: 支持PDF、DOCX等主流文档格式

### 3.2 分镜制作模块

#### 3.2.1 输入来源
- 以剧本创作模块生成的文字分镜脚本为主要输入

#### 3.2.2 输出形式
- 用户可选择输出静态图片序列
- 草图级别即可，为用户提供指导性的脚本概念

#### 3.2.3 人设关联
- 人设制作与分镜制作并行进行
- 分镜中的人物形象与人设模块关联，自动应用已确认的人设

#### 3.2.4 分镜调整功能
- 在保证效率和ROI的情况下提供多方面的调整方向
- 用户可调整镜头角度、景别、人物位置、场景元素等
- 用户如果明确表示需要重新生成分镜，则重新生成

#### 3.2.5 编辑功能
- 支持分镜的增删改查
- 支持分镜顺序调整
- 支持分镜详细信息的编辑

### 3.3 基础音频生成模块

#### 3.3.1 音频类型
- 生成旁白（基于剧本对话和描述）
- 生成基础配乐（根据场景情绪和风格自动匹配）

#### 3.3.2 生成逻辑
- 音频生成基于剧本自动匹配
- 根据场景内容、情绪、风格自动选择合适的音频类型和风格

#### 3.3.3 音频同步
- 尽量同步音频和分镜视频
- 旁白与画面内容对应
- 配乐与场景情绪匹配

#### 3.3.4 生成时机
- 在视频生成之前生成音频
- 音频作为视频生成的重要输入参数

#### 3.3.5 输出格式
- 支持主流音频格式（MP3、WAV等）
- 支持音频的预览和下载

### 3.4 人设制作模块

#### 3.4.1 制作流程
- 以剧本中的角色描述为基础
- 用户确认文字描述后生成2D图片人设档案

#### 3.4.2 输出形式
- 输出2D图片人设
- 包含人物形象、服饰、性格特征等视觉表现

#### 3.4.3 人设作用
- 帮助制片和后续视频制作确认人物形象、服饰、性格等
- 为后续视频生成提供一致性参考，提升生成质量

#### 3.4.4 人设管理
- 支持多角色人设管理
- 支持人设的增删改查
- 支持人设的批量导出

#### 3.4.5 人设应用
- 人设自动应用到分镜制作和视频生成
- 确保同一角色在不同场景中的一致性

### 3.5 分镜视频生成模块

#### 3.5.1 输入来源
- **文字输入**: 剧本中的场景描述、动作描述、对话内容
- **图片输入**: 分镜制作模块生成的分镜图片序列
- **人设参考**: 人设制作模块生成的角色形象档案（作为生成参考，不直接作为输入文件）
- **风格设定**: 剧本创作模块确定的视觉风格设定

#### 3.5.2 输出形式
- **短视频片段**: 每个分镜生成独立的短视频片段（基于当前大模型10秒限制）
- **连续性设计**: 通过前期流程铺垫（剧本、人设、分镜、风格统一）引导大模型API生成具有一致性的多个视频
- **高可剪辑性**: 视频片段设计为便于后期剪辑的素材，包含清晰的入点和出点
- **流畅性保证**: 相邻分镜视频在人物动作、场景元素、光影效果等方面保持连贯

#### 3.5.3 生成策略
- **分段生成**: 每个分镜独立生成视频片段，避免单视频时长限制
- **一致性控制**: 
  - 利用人设档案确保角色形象一致
  - 利用风格设定确保视觉风格统一
  - 利用分镜图片确保场景构图一致
  - 在API调用中传递前后文信息，确保动作连贯
- **批量生成**: 支持多个分镜视频的批量生成，提高效率
- **质量优化**: 提供视频质量选项（标准/高清/超清），平衡质量与生成时间

#### 3.5.4 输出格式
- **支持格式**: MP4（H.264/H.265）、MOV（ProRes）、AVI等主流格式
- **分辨率选项**: 720p、1080p、2K、4K（根据用户需求选择）
- **帧率选项**: 24fps、25fps、30fps、60fps
- **色彩空间**: Rec.709、Rec.2020、DCI-P3等专业色彩空间
- **格式选择**: 用户可在生成前选择输出格式，系统提供格式说明和推荐

#### 3.5.5 视频管理
- **视频预览**: 支持单个视频片段的预览播放
- **序列播放**: 支持按分镜顺序连续播放所有视频片段
- **视频信息**: 显示每个视频的技术参数（分辨率、时长、格式、文件大小）
- **批量下载**: 支持所有视频片段的批量下载
- **云端存储**: 生成的视频自动保存至云端，支持随时访问

#### 3.5.6 音频处理说明
- **音频分离**: 本模块不将音频作为输入，专注于视频生成
- **后期制作指南**: 提供详细的音频+视频整合指南，包括：
  - 音频与视频的同步方法
  - 旁白与画面的对齐技巧
  - 配乐与场景情绪的匹配建议
  - 专业剪辑软件的操作指引
- **时间码标记**: 视频片段包含时间码信息，便于后期音频同步

#### 3.5.7 质量控制
- **生成预览**: 正式生成前提供低分辨率预览，用户确认后再生成高清版本
- **一致性检查**: 系统自动检查相邻视频的一致性，发现问题时提示用户
- **重新生成**: 支持单个视频片段的重新生成，不影响其他片段
- **版本管理**: 同一分镜支持多个生成版本，用户可选择最佳版本

### 3.6 可剪辑成片输出模块

#### 3.6.1 功能定位
- 提供视频片段的整理、排序和基础剪辑功能
- 支持导出到专业剪辑软件（如剪映）进行深度后期制作
- 作为连接AI生成和专业后期制作的桥梁

#### 3.6.2 基础剪辑功能（MVP阶段）
- **片段排序**: 拖拽调整视频片段的播放顺序
- **片段裁剪**: 对每个视频片段进行入点和出点的微调
- **片段拼接**: 将多个视频片段按顺序拼接成完整序列
- **基础转场**: 提供简单的转场效果（硬切、淡入淡出等）
- **时间线预览**: 在时间线上预览整体效果

#### 3.6.3 专业导出功能
- **剪映集成**: 
  - 一键导出到剪映项目格式
  - 保留所有视频片段和时间线信息
  - 自动导入生成的音频文件
  - 提供剪映项目打开指引
- **通用导出**: 
  - 导出标准视频格式（MP4、MOV等）
  - 导出XML/AAF格式（支持导入Premiere、Final Cut等）
  - 导出EDL格式（剪辑决策列表）

#### 3.6.4 后期制作指南
- **音频整合指南**: 详细的音频与视频同步教程
- **剪辑技巧**: 针对AI生成视频的剪辑建议和技巧
- **色彩校正**: 基础色彩校正指导
- **输出设置**: 不同平台（抖音、B站、YouTube等）的输出参数建议

#### 3.6.5 项目管理
- **版本管理**: 支持保存多个剪辑版本
- **自动保存**: 剪辑过程中的自动保存功能
- **撤销重做**: 完善的撤销重做机制
- **项目导出**: 导出完整项目文件，支持在其他设备上继续编辑

#### 3.6.6 协作功能
- **分享预览**: 生成可分享的预览链接
- **评论反馈**: 支持团队成员在视频上添加评论和标记
- **审批流程**: 支持简单的审批和确认流程

---

## 关于剪辑功能的可行性分析

### 技术可行性
- **基础剪辑功能**: 技术难度中等，可以使用现有的视频处理库（如FFmpeg）实现
- **时间线编辑**: 需要开发交互式时间线界面，开发工作量较大
- **实时预览**: 对性能要求较高，需要优化视频解码和渲染

### 开发复杂度评估
- **简单级别**: 片段排序、基础拼接（1-2周开发）
- **中等级别**: 时间线编辑、片段裁剪（3-4周开发）
- **复杂级别**: 实时预览、转场效果、多轨道编辑（6-8周开发）

### 建议的Progressive Deployment策略

#### 第一阶段（MVP）: 基础导出
- 仅提供视频片段的整理和排序
- 支持导出到剪映等专业软件
- 提供详细的后期制作指南
- **目标**: 让用户能够快速使用专业软件完成后期制作

#### 第二阶段: 基础剪辑
- 添加简单的片段裁剪和拼接功能
- 基础的时间线预览
- **目标**: 满足简单项目的快速出片需求

#### 第三阶段: 高级剪辑
- 添加转场效果和多轨道编辑
- 实时预览和渲染优化
- **目标**: 提供完整的在线剪辑体验

### 与剪映集成的优势
1. **降低开发成本**: 无需开发复杂的剪辑功能
2. **专业体验**: 用户可以使用成熟的剪辑工具
3. **市场接受度**: 剪映在国内用户基础广泛
4. **功能互补**: AI生成 + 专业剪辑 = 完整工作流

### 结论
**建议采用渐进式部署策略**：
- **MVP阶段**: 专注于AI生成链路，提供基础导出功能
- **第二阶段**: 根据用户反馈，逐步添加基础剪辑功能
- **长期规划**: 评估是否需要开发完整的时间线剪辑功能

这种策略可以：
- 降低初期开发风险和成本
- 快速验证市场需求
- 根据用户反馈调整功能优先级
- 确保核心AI生成功能的稳定性和质量

## 4. 技术架构考虑

### 4.1 系统架构原则
- 模块化设计，各模块独立但可无缝协作
- 支持动态调用后端AI API
- 数据在各模块间自动传递

### 4.2 AI API集成
- 剧本创作: 调用大语言模型API
- 分镜生成: 调用图像生成API
- 音频生成: 调用语音合成和音乐生成API
- 视频生成: 调用视频生成API

### 4.3 数据流设计
- 各模块输出标准化数据格式
- 数据自动传递至下一流程节点
- 支持人工干预和修改后的数据重新流转

## 5. 多目标优化策略

### 5.1 核心目标
1. **生成质量**: 输出内容的专业性和可用性
2. **处理效率**: 系统响应速度和生成速度
3. **资源消耗**: 计算资源和成本的控制
4. **用户可控性**: 用户对生成过程的干预能力

### 5.2 优先级策略（待确定）
- 需要进一步明确各目标的优先级排序
- 确定在不同场景下的权衡策略

### 5.3 技术实现路径（待补充）
- 需要进一步讨论技术选型和实现方案

## 6. 用户界面设计原则

### 6.1 界面要求
- 直观的操作流程
- 清晰的工作流引导
- 实时的预览功能
- 便捷的修改入口

### 6.2 交互原则
- 明确的操作反馈
- 完善的撤销重做机制
- 自动保存功能
- 关键操作确认机制

## 7. 待补充内容

### 7.1 需要进一步明确的模块
- [x] 分镜视频生成模块详细规范
- [x] 可剪辑成片输出模块详细规范
- [ ] 用户管理和权限系统
- [ ] 项目管理和版本控制
- [ ] 导出和分享功能
- [ ] 集成和API接口

### 7.2 需要讨论的技术问题
- [ ] 具体的AI模型选择和API方案
- [ ] 数据存储和版本管理方案
- [ ] 并发处理和性能优化
- [ ] 安全性和隐私保护
- [ ] 成本控制策略

### 7.3 需要确定的业务问题
- [ ] 定价模型
- [ ] 用户分层策略
- [ ] 商业模式
- [ ] 市场推广策略

### 7.4 已确定的策略
- [x] 剪辑功能采用渐进式部署策略
- [x] MVP阶段专注于AI生成链路，提供基础导出功能
- [x] 优先集成剪映等专业剪辑软件
- [x] 提供详细的后期制作指南

## 8. 更新记录

### 版本 1.1 (2026-02-09)
- 完成分镜视频生成模块详细规范
  - 定义输入来源（文字、图片、人设参考、风格设定）
  - 确定输出形式（短视频片段、连续性设计、高可剪辑性）
  - 制定生成策略（分段生成、一致性控制、批量生成）
  - 明确输出格式（MP4、MOV、AVI等主流格式）
  - 添加视频管理和质量控制功能
  - 说明音频分离策略和后期制作指南
- 完成可剪辑成片输出模块详细规范
  - 定义功能定位和基础剪辑功能
  - 设计专业导出功能（剪映集成、通用导出）
  - 添加后期制作指南和项目管理功能
  - 包含协作功能设计
- 添加剪辑功能可行性分析
  - 技术可行性评估
  - 开发复杂度评估
  - 渐进式部署策略建议
  - 与剪映集成的优势分析
- 更新待补充内容清单

### 版本 1.0 (2026-02-09)
- 初始文档创建
- 完成项目概述和核心价值主张定义
- 完成系统工作流程设计
- 完成剧本创作模块详细规范
- 完成分镜制作模块详细规范
- 完成基础音频生成模块详细规范
- 完成人设制作模块详细规范
- 初步定义技术架构考虑
- 提出多目标优化策略框架

---

**文档维护说明**: 本文档将在每次有新内容加入后更新，记录所有的沟通内容和需求变更。